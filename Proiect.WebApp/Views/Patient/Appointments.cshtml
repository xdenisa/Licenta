@model AppointmentPatientViewModel

@{
    ViewData["Title"] = "Programări";
}

<partial name="_PacientPartial" model="@Model.Patient.Id" />

@if (Model.Appointments.Any())
{
    @foreach (var appointment in Model.Appointments)
    {
        var id = $"exampleModal" + appointment.IdMedic;

        <div id="appointmentsPacientBody">

        </div>

        <input type="hidden" id="idPatientInput" value="@appointment.IdPatient" />

        <div class="modal fade" id="@id" role="dialog" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="card-body">
                                <h5 class="card-title">@appointment.Medic.Person.FirstName @appointment.Medic.Person.LastName</h5>
                                <p class="card-text">@appointment.Medic.Description</p>
                            </div>
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">Data nașterii: @appointment.Medic.Person.BirthDay</li>
                                <li class="list-group-item">Telefon: @appointment.Medic.Person.PhoneNumber</li>
                                <li class="list-group-item">Email: @appointment.Medic.Person.Email</li>
                                <li class="list-group-item">Sex: @appointment.Medic.Person.Sex</li>
                                <li class="list-group-item">Cod Identificare: @appointment.Medic.IdentificationCode</li>
                                <li class="list-group-item">Colegiul Medicilor: @appointment.Medic.MedicalCollegeYear</li>
                                @if (appointment.Medic.Specialization != null)
                                {
                                    <li class="list-group-item">Specializare: @appointment.Medic.Specialization.Name</li>
                                }
                                <li class="list-group-item">Spital: @appointment.Medic.Hospital</li>
                                <li class="list-group-item">Competente: @appointment.Medic.Abilities</li>
                                <li class="list-group-item">Studii: @appointment.Medic.Education</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script id="appointmentsPacient-template" type="text/x-handlebars-template">
            <div class="card">
                <div class="card-header">
                    {{medicFirstName}} {{medicLastName}}
                </div>
                <div class="card-body">
                    <h5 class="card-title">{{appointmentDate}}</h5>
                    <p class="card-text">{{details}}</p>
                    <p class="card-text">{{type}}</p>

                    <button type="button" data-id="exampleModal{{idMedic}}" class="btn btn-outline-success modalButton">
                        Vizualizare profil medic
                    </button>

                    <a href="/Patient/EditAppointment/{{idAppointment}}" class="btn btn-outline-primary">Editează detaliile programării</a>

                    <a href="/Patient/DeleteAppointment/{{idAppointment}}/{{idPatient}}" class="btn btn-outline-danger">Anulează programarea</a>
                </div>
            </div>
        </script>
    }
}
else
{
    <div class="mt-3 p-2 alert-info text-center">
        <h2>Nu aveți nicio programre!</h2>
    </div>
}




<script src="/lib/js/AppointmentsPatient.js"></script>
<script src="~/lib/js/Delete.js"></script>